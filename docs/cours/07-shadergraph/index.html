<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Chapitre 7 : Shader Graph#IMPORTANT
Le Shader Graph est compatible avec le Universal Render Pipeline et le High-Definition Render Pipeline. Il n&rsquo;est pas compatible avec le Built-in Render Pipeline.Dans une application 3D, il est primordial de modifier le rendu visuel final de certains objets. Ceci se fait en écrivant des Shaders. Pour cela, Unity propose un langage spécifique qui s&rsquo;appelle ShaderLab. ShaderLab permet en particulier de facilement et rapidement déclarer des aspects importants de nos Shaders comme les passes de rendu, certaines configurations ou la gestion de la transparence.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Chapitre 7 : Shader Graph" />
<meta property="og:description" content="Chapitre 7 : Shader Graph#IMPORTANT
Le Shader Graph est compatible avec le Universal Render Pipeline et le High-Definition Render Pipeline. Il n&rsquo;est pas compatible avec le Built-in Render Pipeline.Dans une application 3D, il est primordial de modifier le rendu visuel final de certains objets. Ceci se fait en écrivant des Shaders. Pour cela, Unity propose un langage spécifique qui s&rsquo;appelle ShaderLab. ShaderLab permet en particulier de facilement et rapidement déclarer des aspects importants de nos Shaders comme les passes de rendu, certaines configurations ou la gestion de la transparence." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dev7629.dgs5n5xung966.amplifyapp.com/docs/cours/07-shadergraph/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2022-03-23T15:04:32+01:00" />

<title>Chapitre 7 : Shader Graph | HE-Arc | 3252.1 Introduction à Unity</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.2acd3a84969eb86606863f38fd1177b04d0b09a2590b95a7fc53cce47dd46f34.css" integrity="sha256-Ks06hJaeuGYGhj84/RF3sE0LCaJZC5Wn/FPM5H3UbzQ=">
<script defer src="/en.search.min.dd45bb2be06d3824619a5d51f47bdf55c0288dbd629dfa4d140f41732aab37ff.js" integrity="sha256-3UW7K&#43;BtOCRhml1R9HvfVcAojb1infpNFA9BcyqrN/8="></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-183976366-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>HE-Arc | 3252.1 Introduction à Unity</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/cours/00-introduction/" class="">Chapitre 0 : introduction</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cours/01_01-prise-en-main/" class="">Chapitre 1.1 : prise en main</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cours/01_02-gameobjects-components-et-transforms/" class="">Chapitre 1.2 : GameObjects, Components et Transforms</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cours/01_03-prefabs-et-assets/" class="">Chapitre 1.3 : Prefabs et Assets</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cours/02_01-cameras/" class="">Chapitre 2.1 : caméras</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cours/02_02-materiaux/" class="">Chapitre 2.2 : matériaux</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cours/02_03-illumination/" class="">Chapitre 2.3 : illumination</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cours/03-scripting/" class="">Chapitre 3 : scripting</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cours/04_01-animation-de-personnages-3d/" class="">Chapitre 4.1 : animation de personnages 3D</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cours/05-illumination-globale/" class="">Chapitre 5 : illumination globale</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cours/06-post-processing/" class="">Chapitre 6 : post-processing</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cours/07-shadergraph/" class="active">Chapitre 7 : Shader Graph</a>
  

        </li>
      
    
  </ul>
  











  
<ul>
  
  <li>
    <a href="/posts/" >
        Articles
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Chapitre 7 : Shader Graph</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#slides">Slides</a></li>
    <li><a href="#références">Références</a></li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="chapitre-7--shader-graph">
  Chapitre 7 : Shader Graph
  <a class="anchor" href="#chapitre-7--shader-graph">#</a>
</h1>
<blockquote class="book-hint warning">
  <strong>IMPORTANT</strong><br>
Le <b><code>Shader Graph</code></b> est compatible avec le <b><code>Universal Render Pipeline</code></b> et le <b><code>High-Definition Render Pipeline</code></b>.
Il n&rsquo;est <strong>pas</strong> compatible avec le <b><code>Built-in Render Pipeline</code></b>.
</blockquote>

<p>Dans une application 3D, il est primordial de modifier le rendu visuel final de certains objets.
Ceci se fait en écrivant des <b><code>Shaders</code></b>.
Pour cela, Unity propose un langage spécifique qui s&rsquo;appelle <b><code>ShaderLab</code></b>.
<b><code>ShaderLab</code></b> permet en particulier de facilement et rapidement déclarer des aspects importants de nos <b><code>Shaders</code></b> comme les passes de rendu, certaines configurations ou la gestion de la transparence.
Le corps des shaders est lui écrit en  <b><code>HLSL</code></b> (pour High-Level Shader Language)<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.</p>
<p>De plus, Unity propose un outil qui s&rsquo;appelle le <b><code>Shader Graph</code></b><sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>.
Le <b><code>Shader Graph</code></b> permet de créer des <b><code>Shaders</code></b> de manière visuelle.
Les opérations sont représentées par des <b><code>Nodes</code></b>, les données en entrée par des <b><code>Input Ports</code></b>, et les données en sortie par des <b><code>Output Ports</code></b>.
Pour définir comment les données transitent d&rsquo;un <b><code>Node</code></b> vers les autres, les <b><code>Ports</code></b> sont connectées entre eux.
Enfin, un <b><code>Shader</code></b> dans le <b><code>Shader Graph</code></b> peut être paramétré par des <b><code>Properties</code></b>.
Ces <b><code>Properties</code></b> sont visibles et éditables directement dans la fenêtre <code>Inspector</code> de l&rsquo;éditeur.
<figure><img src="/images/UnityShaderGraphExample.gif#center"/>
</figure>
</p>
<p>Un <b><code>Shader</code></b> créé avec le <b><code>Shader Graph</code></b> est un <b><code>Asset</code></b>.
Il faut donc le créer directement dans la fenêtre <code>Project</code> ou dans le menu <code>Asset</code>.
Ensuite, il faut aller dans le menu <code>Create &gt; Shader</code> puis choisir le type de <b><code>Shader</code></b> que nous souhaitons créer.
<figure><img src="/images/UnityCreateShaderGraph.png#center"/>
</figure>
</p>
<p>Une fois créé, nous pouvons ouvrir notre <b><code>Shader</code></b> directement dans le <b><code>Shader Graph</code></b> en double-cliquant dessus.
La fenêtre suivante apparaît :
<figure><img src="/images/UnityShaderGraphWindow.png#center"/>
</figure>
</p>
<p>Nous pouvons noter les éléments suivants :</p>
<ol>
<li>la fenêtre <code>Blackboard</code> qui contient la liste des <b><code>Properties</code></b> du <b><code>Shader</code></b>, c&rsquo;est-à-dire l&rsquo;ensemble des paramètres du <b><code>Shader</code></b> qui seront modifiables directement depuis l&rsquo;éditeur.
Pour le moment, elle est vide;</li>
<li>la fenêtre <code>Graph Inspector</code> : elle fonctionne de la même manière que la fenêtre <code>Inspector</code> que nous avons déjà utilisée dans l&rsquo;éditeur.
En particulier, elle affiche les informations importantes concernant les éléments actuellement sélectionnés dans le graph;</li>
<li>le <b><code>Shader</code></b> représenté par un graphe.
Pour le moment, il ne contient que la <b><code>Master Stack</code></b>.
La <b><code>Master Stack</code></b> contient en fait le <b><code>Vertex Shader</code></b> et le <b><code>Fragment Shader</code></b>.
Ils représentent les sorties effectives de notre <b><code>Shader</code></b>.</li>
<li>le <b><code>Main Preview</code></b> qui permet de voir directement un aperçu des résultats produits par notre <b><code>Shader</code></b>.</li>
</ol>
<blockquote class="book-hint warning">
  <p><strong>ATTENTION</strong></p>
<p>L&rsquo;emplacement ainsi que la visibilité des fenêtres peuvent varier.</p>

</blockquote>

<p>Pour le moment, notre <b><code>Shader</code></b> ne fait pas grand chose.
Nous allons donc rajouter des <b><code>Nodes</code></b>, puis établir les connexions nécessaires entre leurs <b><code>Ports</code></b> respectifs.
Pour créer un nouveau <b><code>Node</code></b>, il suffit de faire un clic droit puis de sélectionner unity <code>Create Node</code> :
<figure><img src="/images/UnityShaderGraphCreateNewNode.png#center"/>
</figure>
</p>
<p>La fenêtre qui apparaît vous affiche la liste de tous les <b><code>Nodes</code></b> actuellement disponibles pour le <b><code>Shader Graph</code></b>.
<figure><img src="/images/UnityShaderGraphCreateNewNodeWindow.png#center"/>
</figure>
</p>
<p>Il en existe déjà beaucoup et chaque nouvelle version de Unity en intègre de nouveaux.
Pour connecter des <b><code>Ports</code></b> entre eux, il suffit de sélectionner l&rsquo;<b><code>Output Port</code></b> du <b><code>Node</code></b> de départ, et le glisser-déposer sur l&rsquo;<b><code>Input Port</code></b> du <b><code>Node</code></b> d&rsquo;arrivée.</p>
<p>Par exemple, on peut :</p>
<ol>
<li>créer un <b><code>Node</code></b> de type <b><code>Voronoi</code></b>;</li>
<li>créer un <b><code>Node</code></b> de type <b><code>Color</code></b>;</li>
<li>multiplier leurs sorties avec un <b><code>Node</code></b> de type <em><strong>Multiply</strong></em> et connecter son <b><code>Output Port</code></b> à l&rsquo;<b><code>Input Port</code></b> <em><strong>Base Color</strong></em> du <b><code>Fragment Shader</code></b>;</li>
<li>Enfin, on peut faire varier l&rsquo;<b><code>Input Port</code></b> <em><strong>Angle Offset</strong></em> du <b><code>Node</code></b> <b><code>Voronoi</code></b> grâce à un <b><code>Node</code></b> de type <em><strong>Time</strong></em>.</li>
</ol>
<p>Une fois ces étapes effectuées, on obtient le <b><code>Shader Graph</code></b> suivant :
<figure><img src="/images/UnityShaderGraphVoronoiExample.gif#center"/>
</figure>
</p>
<p>Pour tester le résultat dans notre scène, il nous faut enfin :</p>
<ol>
<li>enregistrer l&rsquo;<b><code>Asset</code></b> en cliquant sur le bouton <code>Save Asset</code> dans la barre d&rsquo;outils;</li>
<li>créer un nouveau <b><code>Material</code></b> et lui assigner le <b><code>Shader</code></b> créé;</li>
<li>créer un object et lui affecter le <b><code>Material</code></b>.</li>
</ol>
<p>Au final, nous obtenons un résultat similaire à ce qui suit :
<figure><img src="/images/UnityShaderGraphVoronoiResultsInterm.gif#center"/>
</figure>
</p>
<blockquote class="book-hint warning">
  <strong>IMPORTANT</strong> 
Il ne faut pas oublier de sauvegarder son <b><code>Shader</code></b> en cliquant sur le bouton <code>Save asset</code> pour voir le résultat dans l&rsquo;éditeur.
</blockquote>

<p>Nous avons donc pour le moment créé un <b><code>Shader</code></b> qui permet de modifier l&rsquo;aspect des objects auxquels il est attaché.
Cependant, il n&rsquo;est pas vraiment flexible.
En particulier, nous aimerions pouvoir modifier la couleur finale, ainsi que la vitesse d&rsquo;animation de notre <b><code>Shader</code></b>.
Pour ce faire, nous pouvons créer des <b><code>Properties</code></b>.
Ces <b><code>Properties</code></b> seront ensuite modifiables depuis l&rsquo;éditeur, on directement dans un script.
Pour cela, nous devons soit :</p>
<ul>
<li>créer de nouvelles <b><code>Properties</code></b> dans la fenêtre <code>Blackboard</code> en cliquant sur le bouton <code>&#43;</code> et en choisissant le type de <b><code>Property</code></b> désiré;</li>
<li>convertir un <b><code>Node</code></b> de type <b><code>Input</code></b> existant dans le <b><code>Shader Graph</code></b>.</li>
</ul>
<p>En convertissant le <b><code>Node</code></b> de type <b><code>Color</code></b>, en rajoutant les <b><code>Properties</code></b> <em><strong>speed</strong></em> et <em><strong>density</strong></em> de type <b><code>Float</code></b>, et en ajustant les connexions existantes, on obtient le <b><code>Shader Graph</code></b> suivant :
<figure><img src="/images/UnityShaderGraphVoronoiExample2.gif#center"/>
</figure>
</p>
<p>Maintenant, nous pouvons voir le résultat dans la scène Unity directement et surtout, nous pouvons modifier les <b><code>Properties</code></b> pour produire des effets variés :
<figure><img src="/images/UnityShaderGraphVoronoiExampleInEditor.gif#center"/>
</figure>
</p>
<blockquote class="book-hint info">
  <p><strong>INFORMATIONS</strong></p>
<p>Pour les <b><code>Properties</code></b> de type <b><code>Float</code></b>, on peut spécifier de les afficher avec des <b><code>Sliders</code></b> en modifiant leurs paramètres dans la fenêtre <code>Graph Inspector</code>.</p>

</blockquote>

<p>La couleur en entrée peut enfin être remplacée par une texture.
Dans ce cas, il faut tout simplement créer une <b><code>Property</code></b> de type <b><code>Texture2D</code></b>.
Ensuite, il faut créer un <b><code>Node</code></b> de type <b><code>Sample Texture 2D</code></b> qui va être en charge d&rsquo;échantillonner la texture et de retourner les bonnes couleurs, en fonction des UV passées en entrée.</p>
<blockquote class="book-hint danger">
  <p><strong>EXERCICE</strong></p>
<p>Rajouter la possibilité d&rsquo;utiliser une texture en entrée de notre <b><code>Shader Graph</code></b>.</p>

</blockquote>

<h2 id="slides">
  Slides
  <a class="anchor" href="#slides">#</a>
</h2>
<center>
<iframe width="734" height="413" src=https://unity3d.ch/Slides/Chap7_ShaderGraph.html frameborder="0" allowfullscreen></iframe>
</center>

<h2 id="références">
  Références
  <a class="anchor" href="#r%c3%a9f%c3%a9rences">#</a>
</h2>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://docs.microsoft.com/en-us/windows/win32/direct3dhlsl/dx-graphics-hlsl">High-level shader language (HLSL), Microsoft</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p><a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@10.8/manual/index.html">Shader Graph, Unity</a>&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
</article>
 
      




  
  
  


<p style="text-align: right; font-size:small"><strong>LAST MODIFIED</strong><br>March 23, 2022<br>Benoit Le Callennec<br>4a743d6</p>


      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">







<footer>&copy; HE-Arc 2020-2022 - Tous droits réservés.</footer>

</div>
 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#slides">Slides</a></li>
    <li><a href="#références">Références</a></li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












